<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Alexander Powers">





<title>HackEye Segmentation | Alexander Powers</title>






    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


    
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-138288591-1', 'auto');
            ga('send', 'pageview');
        </script>
        
<meta name="generator" content="Hexo 4.2.1"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Alex Powers</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Alex Powers</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">HackEye Segmentation</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Alexander Powers</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">October 8, 2018&nbsp;&nbsp;14:37:24</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <link rel="stylesheet" type="text&#x2F;css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><p>HackEye Segmentation was a project to segment organs within human MRI scans. We were specifically interested in segmenting three tissues, the left eye (LE), right eye (RE), and brain. In order to do this we trained a convolutional neural network on a dataset of 987 MRI scans.</p>
<h1 id="The-Team"><a href="#The-Team" class="headerlink" title="The Team"></a>The Team</h1><p>Team Members: <a href="https://github.com/osandvold302" target="_blank" rel="noopener">Olivia Sandvold</a> and <a href="https://github.com/chasejohnson3" target="_blank" rel="noopener">Chase Johnson</a></p>
<h1 id="The-Data"><a href="#The-Data" class="headerlink" title="The Data"></a>The Data</h1><p>We were provided a dataset of 981 subjects. Each subject had a t1 and t2 weighted image, as well as a segmentation mask of the brain and a fcsv file containing fiducial points that where generated via a pre-existing <a href="https://www.ncbi.nlm.nih.gov/pubmed/28392490" target="_blank" rel="noopener">algorithm</a>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># Example files for a single subject:</span><br><span class="line">0123_45678.fcsv        # fiducial csv file</span><br><span class="line">0123_45678_t1w.nii.gz  # t1 weighted image</span><br><span class="line">0123_45678_t2w.nii.gz  # t2 weighted image</span><br><span class="line">0123_45678_seg.nii.gz  # provided segmentation mask of the brain</span><br></pre></td></tr></table></figure>

<p>It is important to know that these points represent the <strong>physical space</strong> location of the fiducial in a <strong>R</strong>ight <strong>A</strong>anterior <strong>S</strong>uperior (RAS) coordinate frame. As where our t1, t2, and segmentation image were in <strong>L</strong>eft <strong>P</strong>osterieur <strong>S</strong>uperior coordinates (LPS).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># the fiducials we used to create masks for the left eye and right eye</span><br><span class="line">LE,-32.9635972009305,57.9471033061737,-21.105974149604894</span><br><span class="line">RE,30.775787784712914,59.98414825112046,-21.68273735422315</span><br></pre></td></tr></table></figure>

<h1 id="Preprocessing"><a href="#Preprocessing" class="headerlink" title="Preprocessing"></a>Preprocessing</h1><hr>
<p>We used an image processing library called <a href="http://www.simpleitk.org/" target="_blank" rel="noopener">SimpleITK</a> to manipulate our images and <a href="https://pandas.pydata.org/" target="_blank" rel="noopener">pandas</a> to manipulate the fcsv files. We used the <code>RE</code> and <code>LE</code> finducial points from each subjects fcsv file to generate labels of the left and right eye via radial expansion from the fiducial and intensity thresholding. We then added the eye and brain masks together to get our final label mask. The t1 and t2 images had already been intensity normalized and bias field corrected, so no further cleaning was done.</p>
<h1 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h1><hr>
<p>We used a deep learning framework design specifically for medical imaging called <a href="http://www.niftynet.io/" target="_blank" rel="noopener">NiftyNet</a>, which is built on <a href="https://www.tensorflow.org/" target="_blank" rel="noopener">Tensorflow</a>, in order to train our model, evaluate it&#39;s performance and run inference on new data. We trained our model for 30000 interations overnight, which took approximately 8 hours.</p>
<h1 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h1><hr>
<p>We used holdout cross validation to validate our results. Below is a picture of the results we where able to achieve. Below is the segmentation result on holdout data.<br><img src="/2018/10/08/hackeye-segmentation/human_iter30000.png" alt></p>
<p>Learn more on the <a href="http://devpost.com/software/hawkeye_segmentations" target="_blank" rel="noopener">DevPost</a> page, and the image manipulation code is available on <a href="http://github.com/abpwrs/hack-eye-segmentation" target="_blank" rel="noopener">GitHub</a>.</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Alexander Powers</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://alexpowers.dev/2018/10/08/hackeye-segmentation/">https://alexpowers.dev/2018/10/08/hackeye-segmentation/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/medical-imaging/"># medical-imaging</a>
                    
                        <a href="/tags/deep-learning/"># deep-learning</a>
                    
                        <a href="/tags/hackathon/"># hackathon</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2019/03/30/bash-talk/">BASH Talk</a>
            
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© Alexander Powers | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
